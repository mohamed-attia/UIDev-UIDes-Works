/*! jQuery Twitter Plugin - v0.3 - 2012-12-24
* https://github.com/boazsender/jQuery-Twitter-Plugin
* Copyright (c) 2012 Boaz Sender; Licensed MIT, GPL */
var linkify=linkify||function(){};(function(a,b){var c=function(a){return a.replace(/[@]+[a-z0\-9-_]+/ig,function(a){return a.link("http://twitter.com/"+a.replace("@",""))})},d=function(a){return a.replace(/[#]+[a-z0\-9-_]+/ig,function(a){return a.link("http://search.twitter.com/search?q="+a.replace("#","%23"))})},e={media:function(a,b){return e.urls(a,b)},urls:function(a,b){return"<a href='"+b.url+"' title='"+b.expanded_url+"'>"+b.display_url+"</a>"},user_mentions:function(a,b){return"<a href='http://twitter.com/"+b.screen_name+"' title='"+b.name+"'>@"+b.screen_name+"</a>"},hashtags:function(a,b){return"<a href='http://search.twitter.com/search?q=%23"+b.text+"'>#"+b.text+"</a>"}},f=function(b){var c=b.text,d=[];return a.each(b.entities,function(b,c){a.each(c,function(a,c){c.type=b}),d=d.concat(c)}),d.sort(function(a,b){return a.indices[0]<b.indices[0]}),a.each(d,function(a,b){e[b.type]&&(c=c.slice(0,b.indices[0])+e[b.type](c,b)+c.slice(b.indices[1]))}),c};a.twitter=function(b,c){if(!b)return!1;var d,e="",f=new RegExp(!1);typeof b=="string"?d=a.extend({},a.twitter.opts,{q:b}):(b.rpp=b.limit?b.limit:b.rpp,b.limit=b.limit?b.limit:b.rpp,e=b.exclusions?b.exclusions.replace(" ","|"):!1,f=e?new RegExp(e):!1,d=a.extend({},a.twitter.opts,b),d.rpp=d.exclusions||!d.replies||!d.retweets?d.rpp*10:d.rpp),a.getJSON("http://search.twitter.com/search.json?callback=?",d,function(a){c(a,d,f)})},a.fn.twitter=function(e,g){return e?this.each(function(){var h=a(this);a.twitter(e,function(e,i,j){var k=a("<ul>"),l=0,m;if(e.results&&e.results.length){for(m in e.results){var n=e.results[m],o=!i.replies&&n.to_user_id?!1:!0,p=!i.retweets&&n.text.slice(0,2)==="RT"?!1:!0;if(!o)continue;if(!p)continue;if(j&&j.test(n.text))continue;var q=a("<li/>",{"class":"tweet"});i.avatar===!0&&q.append(a("<a/>",{href:"http://twitter.com/"+n.from_user,html:"<img src='"+n.profile_image_url+"'/>"}));var r="<a href='http://twitter.com/"+n.from_user+"'>@"+n.from_user+"</a>: ";i.include_entities?r+=f(n):r+=c(d(b(n.text))),q.append(a("<span>",{"class":"content",html:r})).appendTo(k),l++;if(l===i.limit)break}h.html(k),g&&g(!0)}else h.html(a("<h3/>",{"class":"twitter-notFound",text:i.notFoundText})),g&&g(!1)})}):this},a.twitter.opts={limit:7,exclusions:"",notFoundText:"No results found on twitter",replies:!0,retweets:!0,ands:"",phrase:"",ors:"",nots:"",tag:"",lang:"",from:"",to:"",ref:"",near:"",within:"",units:"",since:"",until:"",tude:"",filter:"",include:"",rpp:5,q:"",avatar:!0,include_entities:!0}})(jQuery,linkify);